{{#if hasBlock}}
  {{yield
    (hash
      themeInstance=themeInstance
      selectedItems=selectedItems
      expandedItems=expandedItems
      sendAction=sendAction
      expandAllRows=expandAllRows
      collapseAllRows=collapseAllRows
      toggleAllSelection=toggleAllSelection
      processedColumns=processedColumns
    )
  }}
{{else}}
  {{#each processedColumns as |column|}}
    {{#if column.isVisible}}
      {{#if column.useSorting}}
        <th class="{{themeInstance.theadCell}} {{column.className}}" {{action "sort" column}}>
          {{#if column.componentForSortCell}}
            {{component
              column.componentForSortCell
              column=column
              data=data
              selectedItems=selectedItems
              expandedItems=expandedItems
              sendAction=sendAction
              themeInstance=themeInstance
              expandAllRows=expandAllRows
              toggleAllSelection=toggleAllSelection
              collapseAllRows=collapseAllRows
            }}
          {{else}}
            {{column.title}}
            <i class="{{if column.sortAsc themeInstance.sort-asc}} {{if column.sortDesc themeInstance.sort-desc}}"></i>
          {{/if}}
        </th>
      {{else}}
        <th class="{{themeInstance.theadCell}} {{themeInstance.theadCellNoSorting}} {{column.className}}">
          {{#if column.componentForSortCell}}
            {{component
              column.componentForSortCell
              column=column
              data=data
              selectedItems=selectedItems
              expandedItems=expandedItems
              sendAction=sendAction
              themeInstance=themeInstance
              expandAllRows=expandAllRows
              collapseAllRows=collapseAllRows
              toggleAllSelection=toggleAllSelection
            }}
          {{else}}
            {{column.title}}
          {{/if}}
        </th>
      {{/if}}
    {{/if}}
  {{/each}}
{{/if}}